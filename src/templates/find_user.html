{% extends "layout.html" %}

{% block title %}Käyttäjät{% endblock %}

{% block content %}
<h2>Etsi käyttäjää</h2>

<form action="/find-user" method="get">
  <p>
    <label for="query">Hakusana</label>:
    <input type="text" name="query" id="query" value="{{ query }}">
  </p>
  <input type="submit" value="Lähetä">
</form>

    {% if query %}
        <p>
            <form action="/find-user" method="get">
                <input type="hidden" name="query" value="{{ query }}" />
                <button type="submit" name="page" value="{{ 1 }}">Ensimmäinen</button>
                <button type="submit" name="page" value="{{ page - 1 }}">&lt;</button>
                {% for i in range(5, 0, -1) %}
                    {% if 0 < page-i %}
                        <button type="submit" name="page" value="{{ page - i }}">{{ page - i }}</button>
                    {% endif %}
                {% endfor %}
                {% for i in range(0, 5) %}
                    {% if page+i < page_count+1 %}
                        <button type="submit" name="page" value="{{ page + i }}">{{ page + i }}</button>
                    {% endif %}
                {% endfor %}
                <button type="submit" name="page" value="{{ page + 1 }}">&gt;</button>
                <button type="submit" name="page" value="{{ page_count }}">Viimeinen</button>
            </form>
            <h4>Sivu {{ page }}/{{ page_count }}</h4>
        </p>
        <h3>Tulokset</h3>
        <table>
            <thead>
                <tr>
                    <th>Tunnusluku</th>
                    <th>Nimimerkki</th>
                    <th>Luotu</th>
                </tr>
            </thead>
            <tbody>
                {% for user in results %}
                <tr>
                    <td><a href="/user/{{user.id}}">{{user.id}}</a></td>
                    <td><a href="/user/{{user.id}}">{{user.username}}</a></td>
                    <td>{{user.created}}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <p>
            <h4>Sivu {{ page }}/{{ page_count }}</h4>
            <form action="/find-user" method="get">
                <input type="hidden" name="query" value="{{ query }}" />
                <button type="submit" name="page" value="{{ 1 }}">Ensimmäinen</button>
                <button type="submit" name="page" value="{{ page - 1 }}">&lt;</button>
                {% for i in range(5, 0, -1) %}
                    {% if 0 < page-i %}
                       <button type="submit" name="page" value="{{ page - i }}">{{ page - i }}</button>
                    {% endif %}
                {% endfor %}
                {% for i in range(0, 5) %}
                    {% if page+i < page_count+1 %}
                       <button type="submit" name="page" value="{{ page + i }}">{{ page + i }}</button>
                    {% endif %}
                {% endfor %}
                <button type="submit" name="page" value="{{ page + 1 }}">&gt;</button>
                <button type="submit" name="page" value="{{ page_count }}">Viimeinen</button>
            </form>
        </p>
    {% endif %}
{% endblock %}